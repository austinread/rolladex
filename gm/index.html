<html>
    <head>
        <title>RollaDex</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link rel="stylesheet" href="../css/bootstrap-grid.min.css">
        <link rel="stylesheet" href="../css/rpgui.min.css">
        <link rel="stylesheet" href="../css/sheet.css">
        <link rel="stylesheet" href="./css/gm.css">

        <script>require("../src/gm/gm.js")</script>
        <script>require("../src/gm/json-io.js")</script>
    </head>
    
    <body class="rpgui-content">
        <div class="nav">
            <button class="nav-link rpgui-button active down" id="dice-tab"><p>Dice Roller</p></button>
            <button class="nav-link rpgui-button" id="initiative-tab"><p>Initiative Tracker</p></button>
            <button class="nav-link rpgui-button" id="soundtrack-tab"><p>Soundtrack</p></button>
        </div>
        <hr class="golden">
        <div class="tab-content">
            <div class="tab-pane active" id="dice" role="tabpanel" aria-labelledby="dice-tab">
                <div id="dice-container" class="container-fluid">
                    <div id="dice-container">
                        <div>
                            <input data-bind="event: {keypress: rollDice}" id="txt-roller" type="text" placeholder="ex: 1d12+2d4+6" autoFocus />
                        </div>
                        <ul data-bind="foreach: previousRolls">
                            <li class="previous-roll">
                                <span data-bind="text: raw" class="raw"></span>
                                <br/>
                                <span data-bind="text: math" class="math">6</span> = <span data-bind="text: sum" class="sum">6</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane" id="initiative" role="tabpanel" aria-labelledby="initiative-tab">
                <div id="initiative-container" class="container-fluid">
                    <p data-bind="text: initiativeOrder()"></p>
                    <hr>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-5 container">
                                <label>PCs</label>
                                <button data-bind="click: addPC" type="button" class="rpgui-button btn-small">+</button>
                                <div data-bind="foreach: initiativePCs" class="row">
                                    <button data-bind="click: $parent.removePC" type="button" class="col-1 btn-small rpgui-button">-</button>
                                    <input data-bind="textInput: name" class=" col-9">
                                    <input data-bind="textInput: initiative" class=" col-2">
                                </div>
                            </div>
                            <div class="col-5 container">
                                <label>Mobs</label>
                                <button data-bind="click: addMob" type="button" class="rpgui-button btn-small">+</button>
                                <div data-bind="foreach: initiativeMobs">
                                    <div class="row">
                                        <button data-bind="click: $parent.removeMob" type="button" class="col-1 btn-small rpgui-button">-</button>
                                        <input data-bind="textInput: name" class=" col-9">
                                        <input data-bind="textInput: initiative" class=" col-2">
                                    </div>
                                    <div class="row">
                                        <fancy-bar params="currentValue: currentHP, maxValue: maxHP, color: 'red'"></fancy-bar>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane" id="soundtrack" role="tabpanel" aria-labelledby="soundtrack-tab">
                <div id="soundtrack-container" class="container-fluid">
                    <div style="display:flex;">
                        <div class="rpgui-container framed-grey" style="max-width:500px;">
                            <input data-bind="textInput: tuneName" placeholder="Name" />
                            <input data-bind="textInput: tuneURL" placeholder="Youtube ID" />
                            <button data-bind="click: addTune" type="button" class="rpgui-button">Add to Soundtrack</button>
                        </div>
                        <div>
                            <iframe data-bind="attr: { src: tuneSrc }" width="200" height="112" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div data-bind="foreach: tunes">
                        <div>
                            <button data-bind="click: $parent.removeTune" class="rpgui-button btn-small" type="button">-</button>
                            <button data-bind="text: name, click: $parent.playTune" type="button" class="rpgui-button"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>