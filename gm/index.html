<html>
    <head>
        <title>RollaDex</title>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <link rel="stylesheet" href="../css/bootstrap-grid.min.css">
        <link rel="stylesheet" href="../css/rpgui.min.css">
        <link rel="stylesheet" href="../css/global.css">
        <link rel="stylesheet" href="./css/gm.css">

        <script>require("../src/gm/gm.js")</script>
        <script>require("../src/gm/json-io.js")</script>
    </head>
    
    <body class="rpgui-content">
        <modal params="name: 'dice-modal'">
            <dice-roller></dice-roller>
        </modal>
        
        <div class="nav">
            <button class="nav-link rpgui-button active down" id="dice-tab"><p>Dice Roller</p></button>
            <button class="nav-link rpgui-button" id="initiative-tab"><p>Initiative Tracker</p></button>
            <button class="nav-link rpgui-button" id="soundtrack-tab"><p>Soundtrack</p></button>
            <button class="nav-link rpgui-button" id="reference-tab"><p>Reference</p></button>
        </div>
        <hr class="golden">
        <div class="tab-content">
            <div class="tab-pane active" id="dice" role="tabpanel" aria-labelledby="dice-tab">
                <dice-roller></dice-roller>
            </div>
            <div class="tab-pane" id="initiative" role="tabpanel" aria-labelledby="initiative-tab">
                <div id="initiative-container" class="container-fluid">
                    <p data-bind="text: initiativeOrder()"></p>
                    <hr>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-5 container">
                                <label>PCs</label>
                                <button data-bind="click: addPC" type="button" class="rpgui-button btn-small">+</button>
                                <div data-bind="foreach: initiativePCs" class="row">
                                    <button data-bind="click: $parent.removePC" type="button" class="col-1 btn-small rpgui-button">-</button>
                                    <input data-bind="textInput: name" class=" col-9">
                                    <input data-bind="textInput: initiative" class=" col-2">
                                </div>
                            </div>
                            <div class="col-5 container">
                                <label>Mobs</label>
                                <button data-bind="click: addMob" type="button" class="rpgui-button btn-small">+</button>
                                <div data-bind="foreach: initiativeMobs">
                                    <div class="row">
                                        <button data-bind="click: $parent.removeMob" type="button" class="col-1 btn-small rpgui-button">-</button>
                                        <input data-bind="textInput: name" class=" col-9">
                                        <input data-bind="textInput: initiative" class=" col-2">
                                    </div>
                                    <div class="row">
                                        <fancy-bar params="currentValue: currentHP, maxValue: maxHP, color: 'red'"></fancy-bar>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="soundtrack" role="tabpanel" aria-labelledby="soundtrack-tab">
                <div id="soundtrack-container" class="container-fluid">
                    <div style="display:flex;">
                        <div class="rpgui-container framed-grey" style="max-width:500px;">
                            <input data-bind="textInput: tuneName" placeholder="Name" />
                            <input data-bind="textInput: tuneURL" placeholder="Youtube ID" />
                            <select data-bind="value: tuneCategory, options: tunes, optionsText: 'name', optionsValue: 'name'" 
                                class="rpgui-dropdown" style="width: 100%;">
                            </select>
                            <button data-bind="click: function() { addTune(tuneCategory()) }" type="button" class="rpgui-button">Add to Soundtrack</button>
                            <button data-bind="click: addTuneCategory" type="button" class="rpgui-button">Add Category</button>
                        </div>
                        <div>
                            <iframe data-bind="attr: { src: tuneSrc }" width="200" height="112" frameborder="0" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div data-bind="foreach: tunes">
                        <hr>
                        <details open> 
                            <summary>
                                <button data-bind="click: $parent.removeTuneCategory, visible: $parent.tunes().length > 1" 
                                    type="button" class="rpgui-button btn-small" type="button">-</button>
                                <input data-bind="textInput: name" placeholder="Category Name" style="max-width: 250px;"/>
                            </summary>
                            <div data-bind="foreach: tunes">
                                <div>
                                    <button data-bind="click: function(data, event) {$parentContext.$parent.removeTune(data, $parentContext.$index)}" 
                                        class="rpgui-button btn-small">-</button>
                                    <button data-bind="text: name, click: $parentContext.$parent.playTune" type="button" class="rpgui-button"></button>
    
                                    <button data-bind="click: function(data, event) {$parentContext.$parent.sortTune(data, $parentContext.$index, -1)}"
                                        class="rpgui-button btn-small">^</button>
                                    <button data-bind="click: function(data, event) {$parentContext.$parent.sortTune(data, $parentContext.$index, 1)}"
                                        class="rpgui-button btn-small">v</button>
                                </div>
                            </div>
                        </details>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="reference" role="tabpanel" aria-labelledby="reference-tab">
                <div id="spellcatalog5e">
                    <spell-catalog-dnd5e params="catalog: spellCatalog5e, spell: spell5e, addFunc: null, disableFunc: null"></spell-catalog-dnd5e>
                </div>
                <div id="spellcatalog2e">
                    <spell-catalog-pf2e params="catalog: spellCatalog2e, spell: spell2e, addFunc: null, disableFunc: null"></spell-catalog-pf2e>
                </div>
            </div>
        </div>
    </body>
</html>